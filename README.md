# Man's Shop Frontend

## 목적
- 기존 jsx 기반의 React를 TypeScript 기반으로 재구현
- Backend 구조를 Multi-module로 개선하고 Frontend를 분리하는 구조가 되었기 때문에 TypeScript 기반으로 재구현하면서 분리

## 설계
- 기존 jsx 기반과 완전 동일.
- 구조
	- jsx와 동일하게 app, assets, common, modules, styles를 유지.
	- 이번 구조에서는 routes를 추가해 모듈별 라우팅을 분산해서 관리
	- 내부 구조에서는 TypeScript를 사용하는만큼 types를 추가해서 type들을 분리해서 관리

## 설계 규칙
- type
	- 해당 파일(.ts, .tsx)에 완전히 종속적인 타입의 경우 types로 분리하지 않고 내부에 작성
	- Components, pages 컴포넌트의 내부 하위 컴포넌트들의 props는 대부분 종속적이기 때문에 분리하지 않고 내부에 작성
	- 위 2가지 상황에 대해 예외적인 경우가 발생할 수 있으므로 고려해서 처리
- routes 분산
	- 최대한 module을 기준으로 routes를 분산
	- 메인 관련과 같이 URL 문제가 있는것이 아니라면 최대한 분산
	- 하나의 컴포넌트만 존재하고 앞으로 페이지 확장 가능성이 적은 경우 routes로 분산 하지 말것.
- path Mapping
	- src 하위 디렉토리 기준으로만 매핑을 처리

---

# History

### 2025/08/19
> 프로젝트 시작
>> 기본 설정 및 구조 처리   
>> common 모듈 전체 작성

<br/>

### 2025/08/20
> main, order 모듈 구현 완료
>> 브라우저 테스트 수행 결과 정상   
>> 페이지 접근 테스트만 했기 때문에 기능 테스트는 완료 이후 테스트 필요   
>> 페이지네이션 처리 테스트까지만 확인

<br/>

### 2025/08/21
> member, product 모듈 구현 완료
>> 테스트는 미수행   
>> 이대로 빠른 구현 목표

<br/>

### 2025/08/22
> cart 모듈 구현 완료

<br/>

### 2025/08/23
> MyPage 모듈 구현 완료   
> Routes 분리

<br/>

### 2025/08/24
> Admin 모듈 구현중

<br/>

### 2025/08/26
> Admin 모듈 구현 완료   
> AdminRoutes 작성, CartRoutes 제거.   
> 브라우저 테스트 시도 중 proxy 문제 발생   
>> 3000/api/api/main/  이런 경로로 요청을 보내게 되면서 404가 발생하는 것이 문제.   
>> proxy 설정을 주석처리하고 Axios url을 직접 localhost:8080/api로 설정해보니 웹 소켓 접근 문제라는 것을 확인.   
>> 백엔드의 WebSocketConfig에서 setAllowedOriginPatterns() 설정이 안되어 있었기 때문에 발생한 문제.   
>> 백엔드에서 해당 부분을 추가해주고 proxy 설정 주석을 해제했더니 문제가 해결.   
>> 하지만 3000/api/api/main으로 요청이 발생하는건 동일했고 정상적으로 데이터를 가져오는 것을 확인.   
>> 경로가 이상해서 확인해보니 정상적인 처리는 아니고 마치 되는 것 처럼 보이는 듯한 착각이라고 함.   
>> 해당 문제 해결로 proxy 설정 중 rewrite를 제거, 각 api 파일의 BASE_URL에서 api를 제거하는 방법으로 문제 해결.   
>> 그럼에도 3000/api/main으로 요청이 발생하는데 정상 동작.   
>> 알아보니 CRA에서는 8080으로 출력되지만 Vite 환경에서는 3000 으로 나오게 되고, Vite가 내부적으로 처리한다는 점을 알게 됨.   
>> 이유에 대해서는 CORS 회피, 보안이 목적.   
>> 같은 도메인에서 요청하는 것 처럼 개발자 도구에 보이기 떄문에 백엔드 정보가 노출이 되지 않게 된다.